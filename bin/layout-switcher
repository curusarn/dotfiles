#!/bin/bash

layout="$(setxkbmap -query | grep layout | cut -d' ' -f6 | tr /a-z/ /A-Z/)"

[[ "$1" == "i3blocks" && "$BLOCK_BUTTON" == "" ]] && echo "$layout" && exit 0

case $layout in
    "US")
        setxkbmap -layout cz -variant qwerty -option caps:escape
        echo "CZ"
        ;;
    *)
        setxkbmap us -option caps:escape
        echo "US"
        ;;
esac
