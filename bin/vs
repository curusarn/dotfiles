#!/bin/bash

err () {
    printf "%s [ERROR]: %s\n" "$0" "$1" >&2
    exit 1
}

session="$1"
if [[ $# -lt 1  ||  $1 == "?" ]]; then
    [[ ! -d ~/.vim/sessions/ ]] && err "Directory ~/.vim/sessions/ does not exist!" 
    files=(~/.vim/sessions/*)
    [[ ${#files[@]} -lt 1 ]] && err "Directory ~/.vim/sessions/ is empty!"
     
    if [[ $1 == "?" ]]; then
        ls -t ~/.vim/sessions 
        exit 0
    fi
    session=`ls -t ~/.vim/sessions | head -1`
fi

vim -S ~/.vim/sessions/"$session"
